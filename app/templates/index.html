{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}Student Exchange Forum of BJUT{% endblock %}

{% block head %}
{{ super() }}
<!--     Custom styles for this template -->
    <link href="{{ url_for('static',filename='posts.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='interact.css') }}" rel="stylesheet">
{% endblock %}

{% block page_content %}
<!--        帖子浏览界面        -->
<div class="col-md-8">
    <div class="page-header">
        <h1>Hello,
            {% if current_user.is_authenticated %}
                {{ current_user.username }}
            {% else %}
                Stranger
            {% endif %}
            !
        </h1>
    </div>


    <div class="post-tabs">
        <ul class="nav nav-tabs">
            <li{% if not show_followed %} class="active"{% endif %}><a href="{{ url_for('.show_all') }}">All</a></li>
            {% if current_user.is_authenticated %}
            <li{% if show_followed %} class="active"{% endif %}><a href="{{ url_for('.show_followed') }}">Followers</a></li>
            {% endif %}
        </ul>
        {% include '_posts.html' %}
    </div>

    {% if pagination %}
    <div class="pagination">
        {{ macros.pagination_widget(pagination, '.index') }}
    </div>
    {% endif %}
</div>


    {% if current_user.is_authenticated %}
        {#    登录用户的个人资料卡及互动功能#}
          <div class="col-md-offset-2 outer">
              <div class="thumbnail inner1 col-sm-12">
                  <div class="col-sm-3">
                    {% if current_user.avatar_img %}
                        <img class="img-rounded profile-thumbnail head" src="{{ current_user.avatar_img }}" alt="avatar"  style="width: 50px; height: 50px">
                    {% else %}
                        <img class="img-rounded profile-thumbnail head" src="{{ current_user.gravatar(size=50) }}" alt="avatar">
                    {% endif %}
                  </div>

                    <div class="col-sm-8 caption">
                        <a href="{{ url_for('main.user', username=current_user.username) }}">
                            <h4>{{ current_user.username }}</h4>
                        </a>
                        <p class="info"> {{ current_user.about_me }}</p>
                   </div>
                  <div class="follow btn-group btn-group-justified" role="group">
                      <a href="{{ url_for('.followers', username=current_user.username) }}" class="btn left-btn" role="button">{{ current_user.followers.count() - 1 }} Followers</a>
                      <a href="{{ url_for('.followed_by', username=current_user.username) }}" class="btn" role="button">{{ current_user.following.count() - 1 }} Following</a>
                  </div>
              </div>
              <div class="inner2  col-sm-12">
                  <div class="new-post col-sm-2">
                      <div>
                          <a href="{{ url_for('.new_post_md')}}">
                              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" width="40" height="40">
                                <defs><style type="text/css"></style></defs>
                                <path d="M824 921H184c-52.9 0-96-43.1-96-96V185c0-52.9 43.1-96 96-96h640c52.9 0 96 43.1 96 96v640c0 52.9-43.1 96-96 96zM184 153c-17.6 0-32 14.4-32 32v640c0 17.6 14.4 32 32 32h640c17.6 0 32-14.4 32-32V185c0-17.6-14.4-32-32-32H184z" fill="#3688FF" p-id="1446"></path>
                                <path d="M285.9 750.9c-8.4 0-16.5-3.3-22.6-9.4-8.4-8.4-11.5-20.8-7.9-32.2l49.3-157.1c1.5-4.9 4.3-9.4 7.9-13l328.8-328.8c6-6 14.1-9.4 22.6-9.4s16.6 3.4 22.6 9.4l107.8 107.8c12.5 12.5 12.5 32.8 0 45.3L465.6 692.2c-3.6 3.6-8.1 6.4-13 7.9l-157.1 49.3c-3.2 1-6.4 1.5-9.6 1.5z m77.5-172L334.8 670l91.2-28.6 300.6-300.6-62.6-62.5-300.6 300.6z" fill="#3688FF" p-id="1447"></path>
                                <path d="M486.4 640.3c-8.2 0-16.4-3.1-22.6-9.4L374 541.1c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l89.8 89.8c12.5 12.5 12.5 32.8 0 45.3-6.4 6.3-14.5 9.4-22.7 9.4z" fill="#3688FF" p-id="1448"></path>
                            </svg>
                          </a>
                      </div>
                      <div class="icon-word">new post</div>
                  </div>
              </div>
              <div class="inner2  col-sm-12">
                  <div class="new-transaction col-sm-2">
                      <div>
                          <a href="{{ url_for('.transaction')}}">
                              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" width="40" height="40">
                                <defs><style type="text/css"></style></defs>
                                <path d="M824 921H184c-52.9 0-96-43.1-96-96V185c0-52.9 43.1-96 96-96h640c52.9 0 96 43.1 96 96v640c0 52.9-43.1 96-96 96zM184 153c-17.6 0-32 14.4-32 32v640c0 17.6 14.4 32 32 32h640c17.6 0 32-14.4 32-32V185c0-17.6-14.4-32-32-32H184z" fill="#3688FF" p-id="1446"></path>
                                <path d="M285.9 750.9c-8.4 0-16.5-3.3-22.6-9.4-8.4-8.4-11.5-20.8-7.9-32.2l49.3-157.1c1.5-4.9 4.3-9.4 7.9-13l328.8-328.8c6-6 14.1-9.4 22.6-9.4s16.6 3.4 22.6 9.4l107.8 107.8c12.5 12.5 12.5 32.8 0 45.3L465.6 692.2c-3.6 3.6-8.1 6.4-13 7.9l-157.1 49.3c-3.2 1-6.4 1.5-9.6 1.5z m77.5-172L334.8 670l91.2-28.6 300.6-300.6-62.6-62.5-300.6 300.6z" fill="#3688FF" p-id="1447"></path>
                                <path d="M486.4 640.3c-8.2 0-16.4-3.1-22.6-9.4L374 541.1c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l89.8 89.8c12.5 12.5 12.5 32.8 0 45.3-6.4 6.3-14.5 9.4-22.7 9.4z" fill="#3688FF" p-id="1448"></path>
                            </svg>
                          </a>
                      </div>
                      <div class="icon-word">transaction</div>
                  </div>
              </div>
              <div class="inner2  col-sm-12">
                  <div class="new-post col-sm-2">
                      <div>
                          <a href="{{ url_for('.show_transaction')}}">
                              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" width="40" height="40">
                                <defs><style type="text/css"></style></defs>
                                <path d="M824 921H184c-52.9 0-96-43.1-96-96V185c0-52.9 43.1-96 96-96h640c52.9 0 96 43.1 96 96v640c0 52.9-43.1 96-96 96zM184 153c-17.6 0-32 14.4-32 32v640c0 17.6 14.4 32 32 32h640c17.6 0 32-14.4 32-32V185c0-17.6-14.4-32-32-32H184z" fill="#3688FF" p-id="1446"></path>
                                <path d="M285.9 750.9c-8.4 0-16.5-3.3-22.6-9.4-8.4-8.4-11.5-20.8-7.9-32.2l49.3-157.1c1.5-4.9 4.3-9.4 7.9-13l328.8-328.8c6-6 14.1-9.4 22.6-9.4s16.6 3.4 22.6 9.4l107.8 107.8c12.5 12.5 12.5 32.8 0 45.3L465.6 692.2c-3.6 3.6-8.1 6.4-13 7.9l-157.1 49.3c-3.2 1-6.4 1.5-9.6 1.5z m77.5-172L334.8 670l91.2-28.6 300.6-300.6-62.6-62.5-300.6 300.6z" fill="#3688FF" p-id="1447"></path>
                                <path d="M486.4 640.3c-8.2 0-16.4-3.1-22.6-9.4L374 541.1c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l89.8 89.8c12.5 12.5 12.5 32.8 0 45.3-6.4 6.3-14.5 9.4-22.7 9.4z" fill="#3688FF" p-id="1448"></path>
                              </svg>
                          </a>
                      </div>
                      <div class="icon-word">Transaction Center</div>
                  </div>
              </div>
          </div>
    {% endif %}
{% endblock %}

{% block scripts %}
{{ super() }}
{{ pagedown.include_pagedown() }}
{% endblock %}
